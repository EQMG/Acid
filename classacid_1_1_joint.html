<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>acid::Joint class | Acid A
high
speed
C++17
Vulkan
game
engine</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="stylesheet" href="acid.css" />
  <link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
  <meta
  name="google-site-verification"
  content="CFh8H_6dbXMEBgSBApTt5U8Tq5CO3iL3dCIhww9DiYs"
  />
  <meta
  name="description"
  content="A
  high
  speed
  C++17
  Vulkan
  game
  engine.">
  <script
  src="acid.js"></script>
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m"><img src="Acid_01.png" alt="" />Acid <span class="m-thin">A
high
speed
C++17
Vulkan
game
engine</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="2">
            <li><a href="annotated.html">Classes</a></li>
            <li><a target="_blank" href="https://github.com/EQMG/Acid/" class="github">Github</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespaceacid.html">acid</a>::<wbr/></span>Joint <span class="m-thin">class</span>
        </h1>
        <p>Class that represents a joint in a &quot;skeleton&quot;. It contains the index of the joint which determines where in the vertex shader uniform array the joint matrix for this joint is loaded up to. It also contains the name of the bone, and a list of all the child joints.</p>
        <nav class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#friends">Friends</a></li>
              </ul>
            </li>
          </ul>
        </nav>
<p>The &quot;animatedTransform&quot; matrix is the joint transform. This is the transform that gets loaded up to the vertex shader and is used to transform vertices. It is a model-space transform that transforms the joint from it&#x27;s bind (original position, no animation applied) position to it&#x27;s current position in the current pose. Changing this transform changes the position/rotation of the joint in the animated entity.</p><p>The two other matrices are transforms that are required to calculate the &quot;animatedTransform&quot; in the</p><aside class="m-note m-default"><h4>See also</h4><p><a href="classacid_1_1_animator.html" class="m-doc">Animator</a></p></aside><p>class. It also has the local bind transform which is the original (no pose/animation applied) transform of the joint relative to the parent joint (in bone-space).</p><p>The &quot;localBindTransform&quot; is the original (bind) transform of the joint relative to its parent (in bone-space). The &quot;inverseBindTransform&quot; is that bind transform in model-space, but inversed.</p>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#afac7de91b59ed53580fdae039aa0abc9" class="m-doc">Joint</a>(</span><span class="m-doc-wrap">) <span class="m-label m-flat m-info">defaulted</span></span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#a46fd22e96862884cb2290a047c001acb" class="m-doc">Joint</a>(</span><span class="m-doc-wrap">uint32_t index,
              std::string name,
              const <a href="classacid_1_1_matrix4.html" class="m-doc">Matrix4</a>&amp; bindLocalTransform)</span>
            </dt>
            <dd></dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a8e696b9503d33309dd8dc5e3ce0fcd74" class="m-doc">CalculateInverseBindTransform</a>(</span><span class="m-doc-wrap">const <a href="classacid_1_1_matrix4.html" class="m-doc">Matrix4</a>&amp; parentBindTransform)</span>
            </dt>
            <dd></dd>
            <dt id="a7d37339ac78cc2e137b3ad3dd5bbd673">
              <span class="m-doc-wrap-bumper">auto <a href="#a7d37339ac78cc2e137b3ad3dd5bbd673" class="m-doc-self">GetIndex</a>(</span><span class="m-doc-wrap">) const -&gt; uint32_t</span>
            </dt>
            <dd><span></span></dd>
            <dt id="a4c46dfe3cf7c64891c4dd8e20c3630a2">
              <span class="m-doc-wrap-bumper">void <a href="#a4c46dfe3cf7c64891c4dd8e20c3630a2" class="m-doc-self">SetIndex</a>(</span><span class="m-doc-wrap">uint32_t index)</span>
            </dt>
            <dd><span></span></dd>
            <dt id="ae2d23f92474f853e5ede388bf0b1c721">
              <span class="m-doc-wrap-bumper">auto <a href="#ae2d23f92474f853e5ede388bf0b1c721" class="m-doc-self">GetName</a>(</span><span class="m-doc-wrap">) const -&gt; const std::string&amp;</span>
            </dt>
            <dd><span></span></dd>
            <dt id="a08e686416a19963c06f93309da45df65">
              <span class="m-doc-wrap-bumper">void <a href="#a08e686416a19963c06f93309da45df65" class="m-doc-self">SetName</a>(</span><span class="m-doc-wrap">const std::string&amp; name)</span>
            </dt>
            <dd><span></span></dd>
            <dt id="af7d2f7c7134410189c54709667cf2891">
              <span class="m-doc-wrap-bumper">auto <a href="#af7d2f7c7134410189c54709667cf2891" class="m-doc-self">GetChildren</a>(</span><span class="m-doc-wrap">) const -&gt; const std::vector&lt;<a href="classacid_1_1_joint.html" class="m-doc">Joint</a>&gt;&amp;</span>
            </dt>
            <dd><span></span></dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a864f1053c4c91cfd61ed9c1d5561fa03" class="m-doc">AddChild</a>(</span><span class="m-doc-wrap">const <a href="classacid_1_1_joint.html" class="m-doc">Joint</a>&amp; child)</span>
            </dt>
            <dd></dd>
            <dt id="ae8338fc42908bf4fc3288870902fb920">
              <span class="m-doc-wrap-bumper">auto <a href="#ae8338fc42908bf4fc3288870902fb920" class="m-doc-self">GetLocalBindTransform</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classacid_1_1_matrix4.html" class="m-doc">Matrix4</a>&amp;</span>
            </dt>
            <dd><span></span></dd>
            <dt id="a6c58310cf09402a3df8de5fd33f7506c">
              <span class="m-doc-wrap-bumper">void <a href="#a6c58310cf09402a3df8de5fd33f7506c" class="m-doc-self">SetLocalBindTransform</a>(</span><span class="m-doc-wrap">const <a href="classacid_1_1_matrix4.html" class="m-doc">Matrix4</a>&amp; localBindTransform)</span>
            </dt>
            <dd><span></span></dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a6aa52a6195144fe8f5af0be02d052e94" class="m-doc">GetInverseBindTransform</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classacid_1_1_matrix4.html" class="m-doc">Matrix4</a>&amp;</span>
            </dt>
            <dd></dd>
            <dt id="a146f829f55fc98aea987bbdc5e7021eb">
              <span class="m-doc-wrap-bumper">void <a href="#a146f829f55fc98aea987bbdc5e7021eb" class="m-doc-self">SetInverseBindTransform</a>(</span><span class="m-doc-wrap">const <a href="classacid_1_1_matrix4.html" class="m-doc">Matrix4</a>&amp; inverseBindTransform)</span>
            </dt>
            <dd><span></span></dd>
          </dl>
        </section>
        <section id="friends">
          <h2><a href="#friends">Friends</a></h2>
          <dl class="m-doc">
            <dt id="abe25d07aa7c71c18553f320a1e076e7d">
              <span class="m-doc-wrap-bumper">auto <a href="#abe25d07aa7c71c18553f320a1e076e7d" class="m-doc-self">operator&gt;&gt;</a>(</span><span class="m-doc-wrap">const <a href="classacid_1_1_node.html" class="m-doc">Node</a>&amp; node,
              <a href="classacid_1_1_joint.html" class="m-doc">Joint</a>&amp; joint) -&gt; const friend <a href="classacid_1_1_node.html" class="m-doc">Node</a>&amp;</span>
            </dt>
            <dd><span></span></dd>
            <dt id="af05414b06a654edbd137449f1af51749">
              <span class="m-doc-wrap-bumper">auto <a href="#af05414b06a654edbd137449f1af51749" class="m-doc-self">operator&lt;&lt;</a>(</span><span class="m-doc-wrap"><a href="classacid_1_1_node.html" class="m-doc">Node</a>&amp; node,
              const <a href="classacid_1_1_joint.html" class="m-doc">Joint</a>&amp; joint) -&gt; <a href="classacid_1_1_node.html" class="m-doc">Node</a>&amp;</span>
            </dt>
            <dd><span></span></dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="afac7de91b59ed53580fdae039aa0abc9"><div>
            <h3>
              <span class="m-doc-wrap-bumper"> acid::<wbr />Joint::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#afac7de91b59ed53580fdae039aa0abc9" class="m-doc-self">Joint</a>(</span><span class="m-doc-wrap">) <span class="m-label m-info">defaulted</span></span></span>
            </h3>
<p>Creates a new skeleton joint.</p>
          </div></section>
          <section class="m-doc-details" id="a46fd22e96862884cb2290a047c001acb"><div>
            <h3>
              <span class="m-doc-wrap-bumper"> acid::<wbr />Joint::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a46fd22e96862884cb2290a047c001acb" class="m-doc-self">Joint</a>(</span><span class="m-doc-wrap">uint32_t index,
              std::string name,
              const <a href="classacid_1_1_matrix4.html" class="m-doc">Matrix4</a>&amp; bindLocalTransform)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">index</td>
                  <td>The joint&#x27;s index (ID).</td>
                </tr>
                <tr>
                  <td>name</td>
                  <td>The name of the joint. This is how the joint is named in the collada file, and so is used to identify which joint a joint transform in an animation keyframe refers to.</td>
                </tr>
                <tr>
                  <td>bindLocalTransform</td>
                  <td>The bone-space transform of the joint in the bind position.</td>
                </tr>
              </tbody>
            </table>
<p>Creates a new skeleton joint.</p>
          </div></section>
          <section class="m-doc-details" id="a8e696b9503d33309dd8dc5e3ce0fcd74"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void acid::<wbr />Joint::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a8e696b9503d33309dd8dc5e3ce0fcd74" class="m-doc-self">CalculateInverseBindTransform</a>(</span><span class="m-doc-wrap">const <a href="classacid_1_1_matrix4.html" class="m-doc">Matrix4</a>&amp; parentBindTransform)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">parentBindTransform</td>
                  <td>The model-space bind transform of the parent joint.</td>
                </tr>
              </tbody>
            </table>
<p>This is called during set-up, after the joints hierarchy has been created. This calculates the model-space bind transform of this joint like so:</p><pre class="m-code"><span class="n">bindTransform</span> <span class="o">=</span> <span class="n">parentBindTransform</span> <span class="o">*</span> <span class="n">localBindTransform</span></pre><p>Where &quot;bindTransform&quot; is the model-space bind transform of this joint, &quot;parentBindTransform&quot; is the model-space bind transform of the parent joint, and &quot;localBindTransform&quot; is the bone-space bind transform of this joint. It the calculates and stores the inverse of this model-space bind transform, for use when calculating the final animation transform each frame. It then recursively calls the method for all of the children joints, so that they too calculate and store their inverse bind-pose transform.</p>
          </div></section>
          <section class="m-doc-details" id="a864f1053c4c91cfd61ed9c1d5561fa03"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void acid::<wbr />Joint::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a864f1053c4c91cfd61ed9c1d5561fa03" class="m-doc-self">AddChild</a>(</span><span class="m-doc-wrap">const <a href="classacid_1_1_joint.html" class="m-doc">Joint</a>&amp; child)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">child</td>
                  <td>The new child joint of this joint.</td>
                </tr>
              </tbody>
            </table>
<p>Adds a child joint to this joint. Used during the creation of the joint hierarchy. Joints can have multiple children, which is why they are stored in a list (e.g. a &quot;hand&quot; joint may have multiple &quot;finger&quot; children joints).</p>
          </div></section>
          <section class="m-doc-details" id="a6aa52a6195144fe8f5af0be02d052e94"><div>
            <h3>
              <span class="m-doc-wrap-bumper">const <a href="classacid_1_1_matrix4.html" class="m-doc">Matrix4</a>&amp; acid::<wbr />Joint::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a6aa52a6195144fe8f5af0be02d052e94" class="m-doc-self">GetInverseBindTransform</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>The inverse of the joint&#x27;s bind transform (in model-space).</td>
                </tr>
              </tfoot>
            </table>
<p>This returns the inverted model-space bind transform. The bind transform is the original model-space transform of the joint (when no animation is applied). This returns the inverse of that, which is used to calculate the animated transform matrix which gets used to transform vertices in the shader.</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <a
target="_blank"
href="https://github.com/EQMG/Acid/">Github</a>
&bull;

<a
target="_blank"
href="https://github.com/EQMG/Acid/issues">Report
an
issue</a>

<br><br>Documentation
generated
using
<a
href="https://mcss.mosra.cz/">m.css</a>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
